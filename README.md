# Fishnet - development intranet repository

A repository of *Eileen Fisher's* intranet site for book keeping and version control.

## Frank
Currently working on:
- Adding filters to search engine
- Task manager for retail team (SPEC TBD)

### Progress/Documentation:
#### Week 1
- Acclimating to website!
- Website uses these jQuery frontend plugins:
	- guidely
	- fancy box
	- piwik
	- clickheat
- Backend is codeigniter, and frontend is generated by codeigniter
- Search interacts with mySQL database, most processing is done by SELECT and INSERT statements
	- searchindex is the table that is build for the search engine to access (contains an aggregation of all useful data form mutliple tables)
- getSearchResults() is the main powerhouse function (searches pages), with search() which searches users, i.e. "Who's Who"
	- getSearchResults() is defined in .../model/pages.php and also defined in .../views/page_parts/pages.php (Unsure of purpose of 2nd definition?)
	- There also exists a getSearchResults_count() which counts the number of results you would get from getSearchResults() (seems kind of redundant, might be necessary if it needs to be used seperately)

#### Week 2
- Tags are currently searchable!
	- Tags have a relevance of "1"
	- Tags are grouped by "page_id"
		- The entry with largest "relevance" is taken, rest are dropped
- searchindex (which contains the rebuild search index function) should now rebuild with needed info
	- Rebuilds with tag_id, tag_name, and access now!
- Permissions and "access" should now be considered in search!

#### Week 3
- HTML code and logic for "advanced search" option opening up filters works
- Backend search.php can successfully "POST" filter information from frontend default.php

#### Week 4
- Rethinking logic on weight for different values in searchindex
	- Consider checking section_id? Need to find what section_id does for search right now.
- Typing up test cases for tag matching and permission matching
- Drafting initial proposal for filter features

#### Week 5
- Added weight to search function, title has 1.2, tags have 1.1, and content has 1.0
- Began looking through work on retail team page/task management

#### Week 6
- Search engine modifications being tested
- Writing test scripts

#### Week 7
- Research on Task Management systems
- What is feasible in 3 weeks?

#### Week 8
- Understanding the backend of fishnet
- Learning codeigniter

#### Week 9
- Begin tackling Views and Controllers

#### Week 10	
- Finished the Model
- Cleaning up code, trying to comment, might not have time
- Demo all working!

### Important Changes:
- SET GLOBAL max_allowed_packet=20047872 (20 MB), to allow for larger search index!
- added new tags to "default.php"

### Possibilities:
- Use SQL REPLACE as well as UNION to string parse before searching
	- Might be too performance heavy... projection of roughly 6x more working
- Multi tag searching? This requires string parsing as well though...
- Use bootstrap for a warped checkbox that is prettier

### Demo Code:
- SELECT obj_id, obj_type, section_id, section_title, page_title, page_content as revision_text,
				page_date_published, tag_name, tag_id, access,
				(IF (title_relevance = 0, content_relevance + tag_relevance, MAX((title_relevance + 0.1) + content_relevance + tag_relevance))) AS relevance
			FROM
				(SELECT *,
					(MATCH(page_title) AGAINST ("recognition" IN BOOLEAN MODE)) AS title_relevance,
					(MATCH(page_content) AGAINST ("recognition" IN BOOLEAN MODE)) AS content_relevance,
					(MATCH(tag_name) AGAINST ("recognition" in BOOLEAN MODE)) AS tag_relevance
				FROM fn_searchindex
				HAVING (title_relevance + content_relevance + content_relevance + tag_relevance) > 0) relevance
			GROUP BY obj_id
			ORDER BY relevance DESC, page_date_published DESC