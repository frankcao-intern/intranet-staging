
require(['jquery','lib/jquery.maskedinput-1.2.2','lib/jquery.cycle.all'],function($){'use strict';(function(w,d){var Engine={seasonSearch:function(){$("#year").mask("9999").keypress(function(e){if(e.keyCode===13){$("#btnChangeSeason").click();}
return false;});$("#btnChangeSeason").click(function(){d.location=coreEngine.siteRoot+"ads/"+$(".select-month p.current").text()+"/"+
$("#year").val();});},ads:function(){$('.rotator-ads').each(function(){var $this=$(this),$slider=$('.slider',$this),$thumbsUL=$('.items',$this),$next=$("button.next",$this),$prev=$("button.prev",$this),itemWidth=69,inactiveThumbnailOpacity=0.50,onSlideChangeDuration=400,$thumbs,totalItems,actual;$('.item',$slider).appendTo($thumbsUL);$thumbs=$('li',$thumbsUL);totalItems=$thumbs.length;actual=totalItems*(itemWidth+1);$thumbsUL.width(760*Math.ceil(actual/760)).data('firstLI',0);$('li',$slider).equalHeights(472);$('.rotator-nav',$this).show();$thumbs.filter(':first').css({'opacity':1});$slider.cycle({fx:'scrollHorz',easing:'easeInOutQuint',animIn:{"opacity":1},animOut:{"opacity":0},cssBefore:{"opacity":0},speed:800,timeout:0,nowrap:1,pager:$thumbsUL,pagerEvent:'mouseenter',onPagerEvent:function(idx){$thumbs.stop().fadeTo(onSlideChangeDuration,inactiveThumbnailOpacity).removeClass('active');$('li:eq('+idx+')',$thumbsUL).stop().fadeTo(onSlideChangeDuration,1).addClass('active');},pagerAnchorBuilder:function(idx){return $('li:eq('+idx+')',$thumbsUL);},activePagerClass:'',allowPagerClickBubble:false});$next.click(function(){var width=0,visibleWidth=0,firstLI=$thumbsUL.data('firstLI'),currLeft=w.parseInt($thumbsUL.css('left')),i;for(i=firstLI;i<$thumbs.length;i++){width+=$thumbs[i].clientWidth+1;if(width>760){$thumbsUL.data('firstLI',i);$thumbsUL.animate({'left':currLeft-visibleWidth},800,'easeInOutQuint');break;}
visibleWidth=width;}});$prev.click(function(){var width=0,lastLI=$thumbsUL.data('firstLI')-1,currLeft=w.parseInt($thumbsUL.css('left')),i;for(i=lastLI;i>=0;i--){width+=$thumbs[i].clientWidth+1;if((width>760)||(i===0)){$thumbsUL.data('firstLI',i);$thumbsUL.animate({'left':currLeft+width},800,'easeInOutQuint');break;}}});});},editorials:function(){$('.rotator-editorials').each(function(){var $this=$(this),$rotatorControls=$('.rotator-controls',$this),$next=$('.next',$rotatorControls),$prev=$('.prev',$rotatorControls),$items=$('.items',$this),$mainRotatorContainer=$('<div class="primary"><\/div>'),$currentContainer=$('<p class="current current-a"><em class="min"><\/em> <span>of<\/span> '+'<em class="max"><\/em><\/p>'),$current=$('.min',$currentContainer),$mainRotator=$('<ul>'),$temp;$items.add($rotatorControls).wrapAll('<div class="secondary"><\/div>');$('.thumb',$items).each(function(i){$(this).data('index',i+1);});$('li',$items).each(function(){$('.item',this).equalHeights(131);});$('> ul > li',$items).equalHeights(395);$('.item',$items).each(function(){$temp=$('<li>').append($('.main',this));$mainRotator.append($temp);}).filter(':first').find('a').addClass('active');$mainRotatorContainer.append($mainRotator).append($currentContainer);$mainRotatorContainer.prependTo($this);$('p.thumb a',$items).bind('mousemove mouseover mouseenter',function(){$('.active',$items).removeClass('active');$(this).addClass('active');});$current.text('1');$this.find('.max').text($('.items .thumb',$this).length);$this.show();$mainRotator.cycle({fx:'scrollHorz',easing:'easeInOutQuint',speed:800,timeout:0,pager:'.items ul',activePagerClass:'',pagerEvent:'mouseenter',allowPagerClickBubble:true,pagerAnchorBuilder:function(idx){return $('.items ul a:eq('+(idx)+')',$this);},after:function(curr,next,opts){$current.text(opts.currSlide+1);}});$items.find('ul').cycle({fx:'scrollHorz',easing:'easeInOutQuint',speed:'fast',timeout:0,prev:$prev,next:$next,activePagerClass:''});});}};$(d).ready(function(){Engine.seasonSearch();Engine.ads();Engine.editorials();});}(window,document));});