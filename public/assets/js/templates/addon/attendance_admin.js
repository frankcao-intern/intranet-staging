
(function($){"use strict";var Engine={searchField:function(){$("#attnQuery").autocomplete({minLength:2,source:function(request,response){var reqUrl="/who/search/qkey/display_name/q/",myresponse=function(data){$(".search-field").children('img').remove();response(data);};$('<img>').attr('src',coreEngine.siteRoot+'assets/images/Jcrop.gif').css('height','8px').css('position','absolute').css('left',"434px").css('top',"11px").appendTo($(".search-field"));coreEngine.getJSON(reqUrl+base64.encode(request.term),"",myresponse);},select:function(event,ui){if(ui.item.id){$("#user_id").val(ui.item.id);}}}).keypress(function(e){if(e.keyCode===13){$("#attnSubmit").click();return false;}else{$("#user_id").val("");}
return true;});$("#attnSubmit").click(function(){var user_id=$("#user_id").val(),year=(new Date()).getFullYear();if(user_id===""){$.message('You have to select someone from the list','warning');}else{document.location=coreEngine.siteRoot+"attendance/"+year+'/'+user_id;}
return false;});}};$(document).ready(function(){Engine.searchField();});}(jQuery));